NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECT_RESTRICT_ALL
>>
>>sh sqlci -i "selectRestrict(selectR1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER1_1 
>>------------------------------------------------------------------------------
>>-- checking GRANT/REVOKE SELECT privs on MVs when SELECT is executed
>>
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on refresh as select * from t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>select * from c1.s1.mv10;

*** ERROR[8573] The user does not have SELECT privilege on table or view C1.S1.MV10.

--- 0 row(s) selected.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>select * from c1.s1.mv10;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>select * from c1.s1.mv10;

*** ERROR[8573] The user does not have SELECT privilege on table or view C1.S1.MV10.

--- 0 row(s) selected.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR1_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR1_USER1_4 
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>sh sqlci -i "selectRestrict(selectR2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_1
>>------------------------------------------------------------------------------
>>-- grant REVOKE select -  compare view and MV
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>--*************************************
>>-- FIRST A VIEW
>>--*************************************
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke select on t10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>drop view v20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_4
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on t10 from sql_user2;

--- SQL operation complete.
>>
>>--*************************************
>>-- SECOND AN MV
>>--*************************************
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_5
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create mv mv20 refresh on request as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_6
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke select on t10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user2_4)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER2_4
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_7)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_7
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on t10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR2_user1_8)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR2_USER1_8
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>sh sqlci -i "selectRestrict(selectR3_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER1_1
>>------------------------------------------------------------------------------
>>-- grant REVOKE select 
>>-- two chains:  a view on top of a  view on top of a table
>>--		a view on top of an MV   on top of a table  
>>-- and we compare both. they must behave identicaly
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create mv mv20 refresh on request initialize on refresh as select * from c1.s1.t10;

--- SQL operation complete.
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER3_1
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>create view v30 as select * from c2.s2.mv20;

*** ERROR[1051] Insufficient privilege on C2.S2.MV20.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>--FAIL
>>create view v31 as select * from c2.s2.v20;

*** ERROR[1051] Insufficient privilege on C2.S2.V20.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>grant select on mv20 to sql_user3;

--- SQL operation complete.
>>grant select on v20 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user3_2)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER3_2
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>create view v30 as select * from c2.s2.mv20;

--- SQL operation complete.
>>create view v31 as select * from c2.s2.v20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>revoke select on v20 from sql_user3;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>--FAIL
>>revoke select on mv20 from sql_user3;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user3_3)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER3_3
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>drop view v30;

--- SQL operation complete.
>>drop view v31;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user2_4)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER2_4
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>revoke select on v20 from sql_user3;

--- SQL operation complete.
>>revoke select on mv20 from sql_user3;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>drop view v20;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "selectRestrict(selectR3_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section SELECTR3_USER1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETE_RESTRICT_ALL
>>
>>sh sqlci -i "deleteRestrict(deleteR1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER1_TITLE
>>------------------------------------------------------------------------------
>>-- checking DELETE privs on MVs of the creator
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER1_USER1_1
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>insert into t10 values (1);

--- 1 row(s) inserted.
>>insert into t10 values (2);

--- 1 row(s) inserted.
>>
>>
>>create MV mv10 refresh on request initialize on create as select * from t10;

--- SQL operation complete.
>>--- SQL operation complete.
>>
>>DELETE from mv10;

--- 2 row(s) deleted.
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "deleteRestrict(deleteR2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_1
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>--- SQL operation complete.
>>
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>--- SQL operation complete.
>>
>>DELETE FROM mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER2_1
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[8573] The user does not have DELETE privilege on table or view C1.S1.MV10.

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant delete on mv10 to sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER2_2
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>DELETE FROM c1.s1.mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke DELETE on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER2_3
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[8573] The user does not have DELETE privilege on table or view C1.S1.MV10.

--- 0 row(s) deleted.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER3_1
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[8573] The user does not have DELETE privilege on table or view C1.S1.MV10.

--- 0 row(s) deleted.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_4
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant DELETE on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user2_4)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER2_4
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>grant DELETE on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user3_2)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER3_2
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>DELETE FROM c1.s1.mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_5
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke DELETE on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user2_5)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER2_5
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>revoke DELETE on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_6
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke DELETE on mv10 from sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user3_3)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER3_3
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[8573] The user does not have DELETE privilege on table or view C1.S1.MV10.

--- 0 row(s) deleted.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR2_user1_7)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER2_USER1_7
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "deleteRestrict(deleteR3_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER3_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>-- view on top of MVs are not updatable and cannot be deleted from
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "deleteRestrict(deleteR3_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section DELETER3_USER1_1
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>create view v10 as select * from t10;

--- SQL operation complete.
>>create view v11 as select * from mv10;

--- SQL operation complete.
>>
>>--FAIL
>>DELETE FROM v10;

--- 0 row(s) deleted.
>>
>>--FAIL
>>DELETE FROM v11;

*** ERROR[4028] Table C1.S1.V11 is not updatable.

*** ERROR[8822] Unable to prepare the statement.

>>
>>drop view v10;

--- SQL operation complete.
>>drop view v11;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERT_RESTRICT_ALL
>>
>>
>>sh sqlci -i "insertRestrict(insertR1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_TITLE
>>
>>------------------------------------------------------------------------------
>>-- checking INSERT privs on MVs
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>-- first through initializing. for that we need insert privs
>>
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on create as select * from t10;

--- SQL operation complete.
>>
>>-- no through explicite insert
>>
>>--FAIL
>>insert into mv10 values (1);

*** ERROR[12074] A Materialized View cannot be directly updated.

*** ERROR[8822] Unable to prepare the statement.

>>
>>set define SQLPARSER_FLAGS 3;
>>
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (10,2);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[8573] The user does not have INSERT privilege on table or view C1.S1.MV10.

--- 0 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant insert on mv10 to sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[8573] The user does not have INSERT privilege on table or view C1.S1.MV10.

--- 0 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[8573] The user does not have INSERT privilege on table or view C1.S1.MV10.

--- 0 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant insert on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user2_4)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER2_4
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant insert on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user3_2)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER3_2
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (12,4);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke insert on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user2_5)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER2_5
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke insert on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user3_3)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER3_3
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>set define SQLPARSER_FLAGS 3;
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (12,4);

*** ERROR[8573] The user does not have INSERT privilege on table or view C1.S1.MV10.

--- 0 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR1_user1_7)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR1_USER1_7
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "insertRestrict(insertR2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR2_TITLE
>>
>>------------------------------------------------------------------------------
>>-- view on top of MVs are not updatable and cannot be inserted into
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "insertRestrict(insertR2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section INSERTR2_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>create view v10 as select * from t10;

--- SQL operation complete.
>>create view v11 as select * from mv10;

--- SQL operation complete.
>>
>>--PASS
>>insert into v10 values (1);

--- 1 row(s) inserted.
>>
>>--FAIL
>>insert into v11 values (1,1);

*** ERROR[4027] Table C1.S1.V11 is not insertable.

*** ERROR[8822] Unable to prepare the statement.

>>
>>
>>drop view v10;

--- SQL operation complete.
>>drop view v11;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section UPDATE_RESTRICT_ALL
>>
>>
>>sh sqlci -i "updateRestrict(updateR1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section UPDATER1_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>------------------------------------------------------------------------------
>>-- checking update for owner - there should be none.
>>-- also checking Grant update and grant ALL options on MVs
>>-- no UPDATE grant option for MVs
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>-- FAIL - blocked by the binder
>>update mv10 set a=1 where a=6;

*** ERROR[12074] A Materialized View cannot be directly updated.

*** ERROR[8822] Unable to prepare the statement.

>>
>>-- lets try with special syntax
>>set define SQLPARSER_FLAGS 3;
>>
>>-- FAIL - since an MV is not updatable by definition.
>>update TABLE (MV_TABLE mv10) set a=1 where a=6;

*** ERROR[8573] The user does not have UPDATE privilege on table or view C1.S1.MV10.

--- 0 row(s) updated.
>>
>>-- FAIL
>>grant update on mv10 to sql_user2;

*** ERROR[12028] grant update not allowed for MVs

--- SQL operation completed with errors.
>>
>>-- FAIL
>>grant update on mv10 to sql_user2 with grant option;

*** ERROR[12028] grant update not allowed for MVs

--- SQL operation completed with errors.
>>
>>-- FAIL
>>grant all on mv10 to sql_user2;

*** ERROR[12028] grant update not allowed for MVs

--- SQL operation completed with errors.
>>
>>-- FAIL
>>grant all on mv10 to sql_user2 with grant option;

*** ERROR[12028] grant update not allowed for MVs

--- SQL operation completed with errors.
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGO_RESTRICT_ALL
>>
>>sh sqlci -i "wgoRestrict(wgoR1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1_TITLE
>>
>>------------------------------------------------------------------------------
>>-- WITH GRANT OPTION RESTRICT
>>-- if we grant and the grantee already has granted we cannot revoke.
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR1S_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_TITLE
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant SELECT on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant SELECT on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke SELECT on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke SELECT on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1S_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1S_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR1I_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant INSERT on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant INSERT on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke INSERT on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke INSERT on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke INSERT on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1I_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1I_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR1D_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_TITLE
>>
>>------------------------------------------------------------------------------
>>-- DELETE 
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to sql_user2;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant DELETE on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant DELETE on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke DELETE on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke DELETE on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke DELETE on mv10 from sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR1D_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR1D_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>-- REVOKING WGO when it is being used
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR2S_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_TITLE
>>
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant SELECT on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR SELECT on mv10 from sql_user2 ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke SELECT on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR SELECT on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>
>>-- WARNING
>>grant SELECT on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>select * from c1.s1.mv10;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke SELECT on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2S_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2S_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR2I_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_TITLE
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant INSERT on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR INSERT on mv10 from sql_user2 ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke INSERT on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR INSERT on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>
>>grant SELECT on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke INSERT on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2I_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2I_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR2D_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_TITLE
>>
>>------------------------------------------------------------------------------
>>-- DELETE
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create MV mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to sql_user2 WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant DELETE on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR DELETE on mv10 from sql_user2 ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke DELETE on c1.s1.mv10 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR DELETE on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant DELETE on c1.s1.mv10 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke DELETE on mv10 from sql_user2 ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR2D_user1_6)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR2D_USER1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "wgoRestrict(wgoR3_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_TITLE
>>
>>------------------------------------------------------------------------------
>>-- ADDING WITH GRANT OPTION after a simple grant
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR3_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int );

--- SQL operation complete.
>>grant select on t1 to sql_user2;

--- SQL operation complete.
>>
>>create table t10 ( a int );

--- SQL operation complete.
>>grant select on t10 to sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR3_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create view v2 as select * from c1.s1.t1;

--- SQL operation complete.
>>create view v22 as select * from v2;

--- SQL operation complete.
>>
>>-- WARNING
>>grant select on v22 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>create mv mv20 refresh on request as select * from c1.s1.t10;

--- SQL operation complete.
>>create view v220 as select * from mv20;

--- SQL operation complete.
>>
>>-- WARNING
>>grant select on v22 to sql_user3;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR3_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR3_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on v22 to sql_user3;

--- SQL operation complete.
>>grant select on v220 to sql_user3;

--- SQL operation complete.
>>
>>
>>drop view v22;

--- SQL operation complete.
>>drop view v2;

--- SQL operation complete.
>>
>>drop view v220;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "wgoRestrict(wgoR3_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section WGOR3_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>drop table t1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMN_REFERENCE_ALL
>>
>>sh sqlci -i "ColumnReference(ColumnReference1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_TITLE
>>---------------------------------------------------------
>>-- TABLE ON TABLE
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "ColumnReference(ColumnReference1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int );

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int );

*** ERROR[1184] Insufficient privilege on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int );

*** ERROR[1184] Insufficient privilege on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant references (a, b) on t1 to sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user2_3)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>create table t2 ( c int references c1.s1.t1 (a) , d int );

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user1_4)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke references (a,b) on t1 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user2_4)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER2_4
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>drop table t2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference1_user1_5)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE1_USER1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke references (a,b) on t1 from sql_user2;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "ColumnReference(ColumnReference2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE2_TITLE
>>
>>---------------------------------------------------------
>>-- TABLE REFERENCING VIEWS
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE2_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int );

--- SQL operation complete.
>>create view v1 as select * from t1;

--- SQL operation complete.
>>
>>grant select on v1 to sql_user2;

--- SQL operation complete.
>>
>>grant references (a) on v1 to sql_user2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference2_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE2_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.v1 (a) , d int );

*** ERROR[1127] The specified table C1.S1.V1 is not a base table.  Please verify that the correct table was specified.

--- SQL operation completed with errors.
>>
>>
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int );

*** ERROR[1184] Insufficient privilege on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>drop table t2;

*** ERROR[1004] Table, view, or stored procedure C2.S2.T2 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Unable to drop object C2.S2.T2.

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference2_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE2_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop view v1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference3_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE3_TITLE
>>
>>
>>---------------------------------------------------------
>>-- TABLE REFERENCING MV
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "ColumnReference(ColumnReference3_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE3_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int );

--- SQL operation complete.
>>create mv mv1 refresh on request as select * from t1;

--- SQL operation complete.
>>
>>grant select on mv1 to sql_user2;

--- SQL operation complete.
>>
>>--FAIL
>>grant references (a) on mv1 to sql_user2;

*** ERROR[12038] GRANT REFERENCES not allowed for MVs

--- SQL operation completed with errors.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference3_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE3_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.mv1 (a) , d int );

*** ERROR[1127] The specified table C1.S1.MV1 is not a base table.  Please verify that the correct table was specified.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "ColumnReference(ColumnReference3_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section COLUMNREFERENCE3_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKE_CASCADE_ALL
>>
>>sh sqlci -i "revokeCascade(revokeCascade_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE_TITLE
>>
>>------------------------------------------------------------------------------
>>-- REVOKE CASCADE
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>-- view on table. revoke select from table 
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on t10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>--FAIL
>>revoke select on t10 from sql_user2 RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>revoke select on t10 from sql_user2 CASCADE;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop view v20;

*** ERROR[1004] Table, view, or stored procedure C2.S2.V20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Unable to drop object C2.S2.V20.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade1_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE1_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--WARNING
>>revoke select on t10 from sql_user2;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_TITLE
>>
>>------------------------------------------------------------------------------
>>-- mv on table. revoke select from table 
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>
>>grant select on t10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on t10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>
>>--FAIL
>>revoke select on t10 from sql_user2 RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>revoke select on t10 from sql_user2 CASCADE;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop mv mv20;

*** ERROR[1004] Table, view, or stored procedure C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1181] Unable to drop object  (file error -99999).

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade2_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE2_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>-- WARNING
>>revoke select on t10 from sql_user2;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_TITLE
>>
>>------------------------------------------------------------------------------
>>-- mv on mv. revoke select from mv
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create mv mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>grant select on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request as select a from c1.s1.mv10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on mv10 from sql_user2;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>--FAIL
>>revoke select on mv10 from sql_user2 RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation completed with errors.
>>
>>revoke select on mv10 from sql_user2 CASCADE;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop mv mv20;

*** ERROR[1004] Table, view, or stored procedure C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1181] Unable to drop object  (file error -99999).

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade3_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE3_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>-- WARNING
>>revoke select on t10 from sql_user2;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_TITLE
>>
>>------------------------------------------------------------------------------
>>-- all kinds
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create mv mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>grant select on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request as select a from c1.s1.mv10;

--- SQL operation complete.
>>create view v20 as select a from c1.s1.mv10;

--- SQL operation complete.
>>
>>grant select on mv20 to sql_user3;

--- SQL operation complete.
>>grant select on v20 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>
>>create mv mv30 refresh on request as select a from c2.s2.mv20;

--- SQL operation complete.
>>create view v30 as select a from c2.s2.v20;

--- SQL operation complete.
>>create view v300 as select a from mv30;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL 
>>revoke select on t10 from sql_user2 cascade;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>revoke select on mv10 from sql_user2 cascade;

--- SQL operation complete.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user3_2)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER3_2
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>
>>drop view v300;

*** ERROR[1004] Table, view, or stored procedure C3.S3.V300 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Unable to drop object C3.S3.V300.

--- SQL operation completed with errors.
>>drop mv mv30;

*** ERROR[1004] Table, view, or stored procedure C3.S3.MV30 does not exist or object type is invalid for the current operation.

*** ERROR[1181] Unable to drop object  (file error -99999).

--- SQL operation completed with errors.
>>drop view v30;

*** ERROR[1004] Table, view, or stored procedure C3.S3.V30 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Unable to drop object C3.S3.V30.

--- SQL operation completed with errors.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>drop mv mv20;

*** ERROR[1004] Table, view, or stored procedure C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1181] Unable to drop object  (file error -99999).

--- SQL operation completed with errors.
>>drop view v20;

*** ERROR[1004] Table, view, or stored procedure C2.S2.V20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Unable to drop object C2.S2.V20.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade4_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE4_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_TITLE
>>
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create mv mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>grant select on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv10 from sql_user2 cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on c1.s1.mv10 to sql_user3;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade5_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE5_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_TITLE
>>
>>
>>------------------------------------------------------------------------------
>>-- DELETE
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create mv mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>grant delete on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant delete on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke delete on mv10 from sql_user2 cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>grant delete on c1.s1.mv10 to sql_user3;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade6_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE6_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_TITLE
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int );

--- SQL operation complete.
>>create mv mv10 refresh on request as select * from t10;

--- SQL operation complete.
>>grant insert on mv10 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant insert on c1.s1.mv10 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from sql_user2 cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>grant insert on c1.s1.mv10 to sql_user3;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation completed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "revokeCascade(revokeCascade7_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section REVOKECASCADE7_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS__ALL
>>
>>sh sqlci -i "multiPrivs(multiPrivs_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS_TITLE
>>------------------------------------------------------------------------------
>>-- grant from multiple levels
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "multiPrivs(multiPrivs1_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_TITLE
>>------------------------------------------------------------------------------
>>-- BASE TABLE
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int );

--- SQL operation complete.
>>grant select on t1 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant select on c1.s1.t1 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke select on c1.s1.t1 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>select * from c1.s1.t1;

--- 0 row(s) selected.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs1_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS1_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on t1 from sql_user3;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "multiPrivs(multiPrivs2_title)";
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_TITLE
>>------------------------------------------------------------------------------
>>-- BASE TABLE
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sqlci -i "multiPrivs(multiPrivs2_user1_1)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int );

--- SQL operation complete.
>>create mv mv1 refresh on request as select * from t1;

--- SQL operation complete.
>>grant select on mv1 to sql_user2 with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs2_user2_1)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant select on c1.s1.mv1 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs2_user1_2)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on mv1 to sql_user3;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs2_user2_2)" -u sql_user2;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke select on c1.s1.mv1 from sql_user3;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs2_user3_1)" -u sql_user3;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>select * from c1.s1.mv1;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sqlci -i "multiPrivs(multiPrivs2_user1_3)" -u sql_user1;
NonStop SQL/MX Conversational Interface 1.0
Copyright (c) 1997-1999 Compaq Computer Corporation.  All Rights Reserved.
>>?section MULTIPRIVS2_USER1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv1 from sql_user3;

--- SQL operation complete.
>>drop mv mv1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

