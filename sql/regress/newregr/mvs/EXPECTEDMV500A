>>log;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section select_restrict_all
>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user1_1 
>>------------------------------------------------------------------------------
>>-- checking GRANT/REVOKE SELECT privs on MVs when SELECT is executed
>>
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_874534873_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>select * from c1.s1.mv10;

*** ERROR[4481] The user does not have SELECT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>select * from c1.s1.mv10;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>select * from c1.s1.mv10;

*** ERROR[4481] The user does not have SELECT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR1_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR1_user1_4 
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_1
>>------------------------------------------------------------------------------
>>-- grant REVOKE select -  compare view and MV
>>
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>--*************************************
>>-- FIRST A VIEW
>>--*************************************
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>drop view v20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_4
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on t10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>--*************************************
>>-- SECOND AN MV
>>--*************************************
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_5
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select * from c1.s1.t10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_464643344_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_6
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user2_4)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user2_4
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_7)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_7
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke select on t10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR2_user1_8)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR2_user1_8
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>
>>
>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user1_1
>>------------------------------------------------------------------------------
>>-- grant REVOKE select 
>>-- two chains:  a view on top of a  view on top of a table
>>--		a view on top of an MV   on top of a table  
>>-- and we compare both. they must behave identicaly
>>
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user2_1
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select * from c1.s1.t10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_782343474_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user3_1
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>create view v30 as select * from c2.s2.mv20;

*** ERROR[4481] The user does not have SELECT privilege on table or view C2.S2.MV20.

*** ERROR[1079] SQL was not able to prepare the statement.

--- SQL operation failed with errors.
>>
>>
>>--FAIL
>>create view v31 as select * from c2.s2.v20;

*** ERROR[4481] The user does not have SELECT privilege on table or view C2.S2.V20.

*** ERROR[1079] SQL was not able to prepare the statement.

--- SQL operation failed with errors.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user2_2
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>grant select on mv20 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>grant select on v20 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user3_2)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user3_2
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>create view v30 as select * from c2.s2.mv20;

--- SQL operation complete.
>>create view v31 as select * from c2.s2.v20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user2_3
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>revoke select on v20 from $$SQLUSER3Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>--FAIL
>>revoke select on mv20 from $$SQLUSER3Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user3_3)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user3_3
>>
>>--sql_user3 
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>drop view v30;

--- SQL operation complete.
>>drop view v31;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user2_4)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user2_4
>>
>>--sql_user2 
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>revoke select on v20 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>revoke select on mv20 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>drop view v20;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "SELECTRESTRICT(selectR3_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section selectR3_user1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section delete_restrict_all
>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR1_title
>>------------------------------------------------------------------------------
>>-- checking DELETE privs on MVs of the creator
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR1_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>insert into t10 values (1);

--- 1 row(s) inserted.
>>insert into t10 values (2);

--- 1 row(s) inserted.
>>
>>
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_155819335_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>DELETE from mv10;

--- 2 row(s) deleted.
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_title
>>
>>
>>------------------------------------------------------------------------------
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_493443845_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>DELETE FROM mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user2_1
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[4481] The user does not have DELETE privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_2
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant delete on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user2_2
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>DELETE FROM c1.s1.mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_3
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke DELETE on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user2_3
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[4481] The user does not have DELETE privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user3_1
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[4481] The user does not have DELETE privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_4
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>grant DELETE on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user2_4)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user2_4
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>grant DELETE on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user3_2)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user3_2
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>DELETE FROM c1.s1.mv10;

--- 0 row(s) deleted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_5
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>--FAIL
>>revoke DELETE on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user2_5)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user2_5
>>
>>--sql_user2
>>-----------
>>set schema c2.s2;

--- SQL operation complete.
>>revoke DELETE on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_6
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>revoke DELETE on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user3_3)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user3_3
>>
>>--sql_user3
>>-----------
>>set schema c3.s3;

--- SQL operation complete.
>>--FAIL
>>DELETE FROM c1.s1.mv10;

*** ERROR[4481] The user does not have DELETE privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR2_user1_7)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR2_user1_7
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR3_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR3_title
>>
>>
>>------------------------------------------------------------------------------
>>-- view on top of MVs are not updatable and cannot be deleted from
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "DELETERESTRICT(deleteR3_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section deleteR3_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>set schema c1.s1;

--- SQL operation complete.
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_118397716_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>create view v10 as select * from t10;

--- SQL operation complete.
>>create view v11 as select * from mv10;

--- SQL operation complete.
>>
>>--FAIL
>>DELETE FROM v10;

--- 0 row(s) deleted.
>>
>>--FAIL
>>DELETE FROM v11;

*** ERROR[4028] Table or view C1.S1.V11 is not updatable.

*** ERROR[8822] The statement was not prepared.

>>
>>drop view v10;

--- SQL operation complete.
>>drop view v11;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insert_restrict_all
>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_title
>>
>>------------------------------------------------------------------------------
>>-- checking INSERT privs on MVs
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>-- first through initializing. for that we need insert privs
>>
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_972752936_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>-- no through explicite insert
>>
>>--FAIL
>>insert into mv10 values (1);

*** ERROR[12074] A materialized view cannot be updated directly.

*** ERROR[8822] The statement was not prepared.

>>
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (10,2);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[4481] The user does not have INSERT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant insert on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[4481] The user does not have INSERT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (11,3);

*** ERROR[4481] The user does not have INSERT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant insert on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user2_4)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user2_4
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant insert on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user3_2)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user3_2
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (12,4);

--- 1 row(s) inserted.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke insert on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user2_5)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user2_5
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke insert on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user3_3)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user3_3
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>-- On Linux/NSK you cannot set parserflags unless you are super,  On NT this
>>-- statement succeeds
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>--FAIL
>>insert into table  ( MV_TABLE c1.s1.mv10 ) values (12,4);

*** ERROR[4481] The user does not have INSERT privilege on table or view C1.S1.MV10.

*** ERROR[8822] The statement was not prepared.

>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR1_user1_7)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR1_user1_7
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR2_title
>>
>>------------------------------------------------------------------------------
>>-- view on top of MVs are not updatable and cannot be inserted into
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "INSERTRESTRICT(insertR2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section insertR2_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_397687517_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>create view v10 as select * from t10;

--- SQL operation complete.
>>create view v11 as select * from mv10;

--- SQL operation complete.
>>
>>--PASS
>>insert into v10 values (1);

--- 1 row(s) inserted.
>>
>>--FAIL
>>insert into v11 values (1,1);

*** ERROR[4027] Table or view C1.S1.V11 does not permit insertions.

*** ERROR[8822] The statement was not prepared.

>>
>>
>>drop view v10;

--- SQL operation complete.
>>drop view v11;

--- SQL operation complete.
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section update_restrict_all
>>sh sh runmxci.ksh -i "UPDATERESTRICT(updateR1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section updateR1_user1_1
>>set schema c1.s1;

--- SQL operation complete.
>>
>>------------------------------------------------------------------------------
>>-- checking update for owner - there should be none.
>>-- also checking Grant update and grant ALL options on MVs
>>-- no UPDATE grant option for MVs
>>
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_947436137_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>-- FAIL - blocked by the binder
>>update mv10 set a=1 where a=6;

*** ERROR[12074] A materialized view cannot be updated directly.

*** ERROR[8822] The statement was not prepared.

>>
>>-- lets try with special syntax
>>set PARSERFLAGS 3;

--- SQL operation complete.
>>
>>-- FAIL - since an MV is not updatable by definition.
>>update TABLE (MV_TABLE mv10) set a=1 where a=6;

--- 0 row(s) updated.
>>
>>-- FAIL
>>grant update on mv10 to $$SQLUSER2Q$$;

*** ERROR[12028] Grant update is not allowed for materialized views.

--- SQL operation failed with errors.
>>
>>-- FAIL
>>grant update on mv10 to $$SQLUSER2Q$$ with grant option;

*** ERROR[12028] Grant update is not allowed for materialized views.

--- SQL operation failed with errors.
>>
>>-- FAIL
>>grant all on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>-- FAIL
>>grant all on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgo_restrict_all
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1_title
>>
>>------------------------------------------------------------------------------
>>-- WITH GRANT OPTION RESTRICT
>>-- if we grant and the grantee already has granted we cannot revoke.
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_title
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_158488747_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant SELECT on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant SELECT on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke SELECT on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke SELECT on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1S_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1S_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_title
>>
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_514668287_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant INSERT on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant INSERT on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke INSERT on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke INSERT on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke INSERT on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1I_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1I_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_title
>>
>>------------------------------------------------------------------------------
>>-- DELETE 
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_465591728_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant DELETE on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant DELETE on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke DELETE on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke DELETE on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke DELETE on mv10 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR1D_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR1D_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2_title
>>
>>
>>------------------------------------------------------------------------------
>>-- REVOKING WGO when it is being used
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_title
>>
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_817146668_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant SELECT on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant SELECT on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR SELECT on mv10 from $$SQLUSER2Q$$ ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke SELECT on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR SELECT on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>
>>-- WARNING
>>grant SELECT on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>select * from c1.s1.mv10;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke SELECT on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2S_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2S_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_title
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_696163419_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant INSERT on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant INSERT on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR INSERT on mv10 from $$SQLUSER2Q$$ ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke INSERT on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR INSERT on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>
>>grant SELECT on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke INSERT on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2I_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2I_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_title
>>
>>------------------------------------------------------------------------------
>>-- DELETE
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create MV mv10 refresh on request initialize on create attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_536597159_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant DELETE on mv10 to $$SQLUSER2Q$$ WITH GRANT OPTION;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant DELETE on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke GRANT OPTION FOR DELETE on mv10 from $$SQLUSER2Q$$ ;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>revoke DELETE on c1.s1.mv10 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke GRANT OPTION FOR DELETE on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user2_3
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>-- WARNING
>>grant DELETE on c1.s1.mv10 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke DELETE on mv10 from $$SQLUSER2Q$$ ;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR2D_user1_6)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR2D_user1_6
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_title
>>
>>------------------------------------------------------------------------------
>>-- ADDING WITH GRANT OPTION after a simple grant
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>grant select on t1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>grant select on t10 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create view v2 as select * from c1.s1.t1;

--- SQL operation complete.
>>create view v22 as select * from v2;

--- SQL operation complete.
>>
>>grant select on v22 to $$SQLUSER3Q$$;

*** WARNING[1012] No privileges were granted.  You lack grant option on the specified privileges.

--- SQL operation completed with warnings.
>>
>>
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select * from c1.s1.t10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_997496299_9272 was created for the materialized view.

--- SQL operation completed with warnings.
>>create view v220 as select * from mv20;

--- SQL operation complete.
>>
>>grant select on v220 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on v22 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>grant select on v220 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>drop view v22;

--- SQL operation complete.
>>drop view v2;

--- SQL operation complete.
>>
>>drop view v220;

--- SQL operation complete.
>>drop mv mv20;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "WGORESTRICT(wgoR3_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section wgoR3_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>drop table t1;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section column_reference_all
>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_title
>>---------------------------------------------------------
>>-- TABLE ON TABLE
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user2_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int ) attribute all mvs allowed;

*** WARNING[1302] NO ACTION referential action for ON UPDATE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** WARNING[1302] NO ACTION referential action for ON DELETE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** ERROR[1184] You do not have the required privilege(s) on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user2_2
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int ) attribute all mvs allowed;

*** WARNING[1302] NO ACTION referential action for ON UPDATE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** WARNING[1302] NO ACTION referential action for ON DELETE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** ERROR[1184] You do not have the required privilege(s) on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant references (a, b) on t1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user2_3)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user2_3
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>create table t2 ( c int references c1.s1.t1 (a) , d int ) attribute all mvs allowed;

*** WARNING[1302] NO ACTION referential action for ON UPDATE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** WARNING[1302] NO ACTION referential action for ON DELETE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user1_4)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user1_4
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke references (a,b) on t1 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user2_4)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user2_4
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>drop table t2;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE1_user1_5)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE1_user1_5
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke references (a,b) on t1 from $$SQLUSER2Q$$;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE2_title
>>
>>---------------------------------------------------------
>>-- TABLE REFERENCING VIEWS
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE2_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int ) attribute all mvs allowed;

--- SQL operation complete.
>>create view v1 as select * from t1;

--- SQL operation complete.
>>
>>grant select on v1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>grant references (a) on v1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE2_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE2_user2_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.v1 (a) , d int ) attribute all mvs allowed;

*** ERROR[1127] The specified table C1.S1.V1 is not a base table.  Please verify that the correct table was specified.

--- SQL operation failed with errors.
>>
>>
>>--FAIL
>>create table t2 ( c int references c1.s1.t1 (a) , d int ) attribute all mvs allowed;

*** WARNING[1302] NO ACTION referential action for ON UPDATE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** WARNING[1302] NO ACTION referential action for ON DELETE clause behaves like RESTRICT referential action. To alter the behavior, set the appropriate value for the REF_CONSTRAINT_NO_ACTION_LIKE_RESTRICT default.

*** ERROR[1184] You do not have the required privilege(s) on C1.S1.T1.A.

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>
>>drop table t2;

*** ERROR[1004] Object C2.S2.T2 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.T2 could not be dropped.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE2_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE2_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop view v1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE3_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE3_title
>>
>>
>>---------------------------------------------------------
>>-- TABLE REFERENCING MV
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE3_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE3_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>
>>--sql_user1
>>-----------
>>
>>create table t1 ( a int not null unique, b int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv1 refresh on request initialize on refresh attribute all mvs allowed as select * from t1 group by a, b;

*** WARNING[12112] A secondary index C1.S1.MV1_419673281_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>grant select on mv1 to $$SQLUSER2Q$$;

--- SQL operation complete.
>>
>>--FAIL
>>grant references (a) on mv1 to $$SQLUSER2Q$$;

*** ERROR[12038] GRANT REFERENCES cannot be performed on materialized views.

--- SQL operation failed with errors.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE3_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE3_user2_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>--FAIL
>>create table t2 ( c int references c1.s1.mv1 (a) , d int ) attribute all mvs allowed;

*** ERROR[1127] The specified table C1.S1.MV1 is not a base table.  Please verify that the correct table was specified.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "COLUMNREFERENCE(COLUMNREFERENCE3_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section COLUMNREFERENCE3_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section revoke_cascade_all
>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE_title
>>
>>------------------------------------------------------------------------------
>>-- REVOKE CASCADE
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_title
>>
>>
>>------------------------------------------------------------------------------
>>-- view on table. revoke select from table 
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create view v20 as select * from c1.s1.t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$ RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>revoke select on t10 from $$SQLUSER2Q$$ CASCADE;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop view v20;

*** ERROR[1004] Object C2.S2.V20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.V20 could not be dropped.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE1_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE1_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--WARNING
>>revoke select on t10 from $$SQLUSER2Q$$;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>drop table t10;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_title
>>
>>------------------------------------------------------------------------------
>>-- mv on table. revoke select from table 
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>
>>grant select on t10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select * from c1.s1.t10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_635772832_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>
>>--FAIL
>>revoke select on t10 from $$SQLUSER2Q$$ RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>revoke select on t10 from $$SQLUSER2Q$$ CASCADE;

*** WARNING[12110] The materialized view C2.S2.MV20 and its dependents were dropped because of insufficient privileges.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop mv mv20;

*** ERROR[1004] Object C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.MV20 could not be dropped.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE2_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE2_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>-- WARNING
>>revoke select on t10 from $$SQLUSER2Q$$;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_title
>>
>>------------------------------------------------------------------------------
>>-- mv on mv. revoke select from mv
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_954486162_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant select on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select a from c1.s1.mv10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_727494862_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL
>>revoke select on mv10 from $$SQLUSER2Q$$;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>--FAIL
>>revoke select on mv10 from $$SQLUSER2Q$$ RESTRICT;

*** ERROR[1014] Privileges were not revoked.  Dependent privilege descriptors still exist.

--- SQL operation failed with errors.
>>
>>revoke select on mv10 from $$SQLUSER2Q$$ CASCADE;

*** WARNING[12110] The materialized view C2.S2.MV20 and its dependents were dropped because of insufficient privileges.

--- SQL operation completed with warnings.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>drop mv mv20;

*** ERROR[1004] Object C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.MV20 could not be dropped.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE3_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE3_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>-- WARNING
>>revoke select on t10 from $$SQLUSER2Q$$;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_title
>>
>>------------------------------------------------------------------------------
>>-- all kinds
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_536775392_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant select on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>create mv mv20 refresh on request initialize on refresh attribute all mvs allowed as select a from c1.s1.mv10 group by a;

*** WARNING[12112] A secondary index C2.S2.MV20_166227113_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>create view v20 as select a from c1.s1.mv10;

--- SQL operation complete.
>>
>>grant select on mv20 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>grant select on v20 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>
>>create mv mv30 refresh on request initialize on refresh attribute all mvs allowed as select a from c2.s2.mv20 group by a;

*** WARNING[12112] A secondary index C3.S3.MV30_153166223_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>create view v30 as select a from c2.s2.v20;

--- SQL operation complete.
>>create view v300 as select a from mv30;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>--FAIL 
>>revoke select on t10 from $$SQLUSER2Q$$ cascade;

*** WARNING[1015] Some of the specified privileges could not be revoked.

--- SQL operation completed with warnings.
>>
>>revoke select on mv10 from $$SQLUSER2Q$$ cascade;

*** WARNING[12110] The materialized view C2.S2.MV20 and its dependents were dropped because of insufficient privileges.

--- SQL operation completed with warnings.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user3_2)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user3_2
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>
>>drop view v300;

*** ERROR[1004] Object C3.S3.V300 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C3.S3.V300 could not be dropped.

--- SQL operation failed with errors.
>>drop mv mv30;

*** ERROR[1004] Object C3.S3.MV30 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C3.S3.MV30 could not be dropped.

--- SQL operation failed with errors.
>>drop view v30;

*** ERROR[1004] Object C3.S3.V30 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C3.S3.V30 could not be dropped.

--- SQL operation failed with errors.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>drop mv mv20;

*** ERROR[1004] Object C2.S2.MV20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.MV20 could not be dropped.

--- SQL operation failed with errors.
>>drop view v20;

*** ERROR[1004] Object C2.S2.V20 does not exist or object type is invalid for the current operation.

*** ERROR[1031] Object C2.S2.V20 could not be dropped.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE4_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE4_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_title
>>
>>------------------------------------------------------------------------------
>>-- SELECT
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_167234753_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant select on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv10 from $$SQLUSER2Q$$ cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant select on c1.s1.mv10 to $$SQLUSER3Q$$;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE5_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE5_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_title
>>
>>
>>------------------------------------------------------------------------------
>>-- DELETE
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_173518283_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant delete on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant delete on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke delete on mv10 from $$SQLUSER2Q$$ cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>grant delete on c1.s1.mv10 to $$SQLUSER3Q$$;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE6_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE6_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_title
>>
>>------------------------------------------------------------------------------
>>-- INSERT
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t10 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv10 refresh on request initialize on refresh attribute all mvs allowed as select * from t10 group by a;

*** WARNING[12112] A secondary index C1.S1.MV10_841873714_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant insert on mv10 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>grant insert on c1.s1.mv10 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke insert on mv10 from $$SQLUSER2Q$$ cascade;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2 
>>-----------
>>--FAIL
>>grant insert on c1.s1.mv10 to $$SQLUSER3Q$$;

*** ERROR[1017] You are not authorized to perform this operation.

--- SQL operation failed with errors.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "REVOKECASCADE(REVOKECASCADE7_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section REVOKECASCADE7_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>drop mv mv10;

--- SQL operation complete.
>>drop table t10;

--- SQL operation complete.
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS__all
>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS_title
>>------------------------------------------------------------------------------
>>-- grant from multiple levels
>>
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_title
>>------------------------------------------------------------------------------
>>-- BASE TABLE
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>grant select on t1 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant select on c1.s1.t1 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on t1 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke select on c1.s1.t1 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>select * from c1.s1.t1;

--- 0 row(s) selected.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS1_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS1_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on t1 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_title)";
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_title
>>------------------------------------------------------------------------------
>>-- BASE TABLE
>>
>>
>>exit;

End of MXCI Session

>>
>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user1_1)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user1_1
>>-- This CQD is added for creating a table  with no
>>-- partition or primary key when the POS is enabled.
>>control query default POS_ALLOW_NON_PK_TABLES 'ON';

--- SQL operation complete.
>>
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>create table t1 ( a int ) attribute all mvs allowed;

--- SQL operation complete.
>>create mv mv1 refresh on request initialize on create attribute all mvs allowed as select * from t1 group by a;

*** WARNING[12112] A secondary index C1.S1.MV1_434478274_1372 was created for the materialized view.

--- SQL operation completed with warnings.
>>grant select on mv1 to $$SQLUSER2Q$$ with grant option;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user2_1)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user2_1
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>grant select on c1.s1.mv1 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user1_2)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user1_2
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>grant select on mv1 to $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user2_2)" -u $$SQLUSER2X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user2_2
>>set schema c2.s2;

--- SQL operation complete.
>>
>>--sql_user2
>>-----------
>>revoke select on c1.s1.mv1 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user3_1)" -u $$SQLUSER3X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user3_1
>>set schema c3.s3;

--- SQL operation complete.
>>
>>--sql_user3
>>-----------
>>select * from c1.s1.mv1;

--- 0 row(s) selected.
>>
>>exit;

End of MXCI Session

>>sh sh runmxci.ksh -i "MULTIPRIVS(MULTIPRIVS2_user1_3)" -u $$SQLUSER1X$$;
C:/Tdm_SQL/bin/sqlci.exe
Hewlett-Packard NonStop(TM) SQL/MX Conversational Interface 2.5
(c) Copyright 2003-2010 Hewlett-Packard Development Company, LP.
>>?section MULTIPRIVS2_user1_3
>>set schema c1.s1;

--- SQL operation complete.
>>
>>--sql_user1
>>-----------
>>revoke select on mv1 from $$SQLUSER3Q$$;

--- SQL operation complete.
>>drop mv mv1;

--- SQL operation complete.
>>drop table t1;

--- SQL operation complete.
>>
>>
>>exit;

End of MXCI Session

>>
>>exit;

End of MXCI Session

